<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login - PantoneChecker</title>
<link rel="stylesheet" href="static/style.css">
</head>
<body>
<div class="login-container">
    <h2>PantoneChecker Login</h2>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="login-msg"></p>
</div>

<script>
async function login() {
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    const res = await fetch("/login", {
        method: "POST",
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({username, password})
    });
    const data = await res.json();
    if(res.ok){
        localStorage.setItem("api_token", data.token);
        window.location.href = "index.html";
    } else {
        document.getElementById("login-msg").innerText = data.error || "Login fehlgeschlagen";
    }
}
</script>
</body>
</html>
